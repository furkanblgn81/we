{% extends "base.html" %}
{% block content %}

<h2 class="text-center mb-4">Giriş Yap</h2>
<form method="POST" action="{{ url_for('login') }}">
    <div class="mb-3">
        <label for="username" class="form-label">Kullanıcı Adı / Email</label>
        <input type="text" id="username" name="username" class="form-control" required autofocus>
    </div>
    <div class="mb-3">
        <label for="password" class="form-label">Şifre</label>
        <input type="password" id="password" name="password" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-primary w-100">Giriş Yap</button>
    <p class="mt-3 text-center">Hesabın yok mu? <a href="{{ url_for('register') }}">Kayıt Ol</a></p>
</form>

<hr class="my-5">

<h2 class="text-center mb-4">Misafir Dosya Gönderimi</h2>
<div class="alert alert-warning text-center">
    Misafir olarak yükleme yapıyorsunuz. Maksimum <strong>5 MB</strong> dosya yükleyebilirsiniz.
</div>

<form method="POST" action="{{ url_for('upload_file') }}" enctype="multipart/form-data" novalidate>
    <div class="mb-3">
        <label for="guest_email" class="form-label">Kendi Email Adresiniz</label>
        <input type="email" id="guest_email" name="guest_email" class="form-control" required placeholder="Misafir e-posta adresiniz">
    </div>
    <div class="mb-3">
        <label for="receiver_email" class="form-label">Gönderilecek Email</label>
        <input type="email" id="receiver_email" name="receiver_email" class="form-control" required placeholder="Alıcının e-posta adresi">
    </div>
    <div class="mb-3">
        <label for="message" class="form-label">Mesaj</label>
        <textarea id="message" name="message" class="form-control" rows="3" placeholder="İsterseniz mesaj yazabilirsiniz..."></textarea>
    </div>
    <div class="mb-3">
        <label for="file" class="form-label upload-area" tabindex="0">Dosya Seç veya Bırakınız (maksimum 5 MB)</label>
        <input type="file" id="file" name="file" required>
    </div>
        <div class="mb-3">
        <label for="valid_days" class="form-label">Geçerlilik Süresi (gün)</label>
        <input type="number" id="valid_days" name="valid_days" value="7" min="1" max="30" class="form-control">
    </div>

    <button type="submit" class="btn btn-success w-100">Dosyayı Gönder</button>
</form>

<script>
    const uploadLabel = document.querySelector('.upload-area');
    const fileInput = document.getElementById('file');
    uploadLabel.addEventListener('keydown', function(e) {
        if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            fileInput.click();
        }
    });
    uploadLabel.addEventListener('click', () => fileInput.click());
</script>

{% endblock %}

